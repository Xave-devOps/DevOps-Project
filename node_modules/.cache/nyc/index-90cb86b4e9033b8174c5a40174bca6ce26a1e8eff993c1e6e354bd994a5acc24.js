function cov_1xj6pfxuml(){var path="C:\\Users\\ajxia\\OneDrive\\Desktop\\Documents\\DVOPS_Projects\\DVOPS_Project\\DevOps-Project\\index.js";var hash="b005bbfd6fe19fba4af2390a5ecdf85e10f26ff8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ajxia\\OneDrive\\Desktop\\Documents\\DVOPS_Projects\\DVOPS_Project\\DevOps-Project\\index.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:19},end:{line:2,column:41}},"2":{start:{line:3,column:11},end:{line:3,column:24}},"3":{start:{line:4,column:13},end:{line:4,column:28}},"4":{start:{line:5,column:13},end:{line:5,column:28}},"5":{start:{line:7,column:12},end:{line:7,column:21}},"6":{start:{line:8,column:13},end:{line:8,column:37}},"7":{start:{line:9,column:15},end:{line:9,column:52}},"8":{start:{line:12,column:0},end:{line:12,column:16}},"9":{start:{line:13,column:0},end:{line:13,column:51}},"10":{start:{line:14,column:0},end:{line:14,column:27}},"11":{start:{line:15,column:0},end:{line:15,column:34}},"12":{start:{line:20,column:4},end:{line:20,column:35}},"13":{start:{line:21,column:0},end:{line:21,column:72}},"14":{start:{line:22,column:0},end:{line:22,column:66}},"15":{start:{line:25,column:23},end:{line:25,column:49}},"16":{start:{line:26,column:0},end:{line:26,column:34}},"17":{start:{line:29,column:0},end:{line:31,column:3}},"18":{start:{line:30,column:2},end:{line:30,column:58}},"19":{start:{line:34,column:0},end:{line:36,column:3}},"20":{start:{line:35,column:2},end:{line:35,column:23}},"21":{start:{line:39,column:27},end:{line:39,column:58}},"22":{start:{line:40,column:0},end:{line:40,column:33}},"23":{start:{line:43,column:0},end:{line:45,column:3}},"24":{start:{line:44,column:2},end:{line:44,column:61}},"25":{start:{line:48,column:0},end:{line:68,column:3}},"26":{start:{line:49,column:19},end:{line:49,column:52}},"27":{start:{line:50,column:15},end:{line:50,column:29}},"28":{start:{line:51,column:13},end:{line:51,column:57}},"29":{start:{line:54,column:28},end:{line:56,column:3}},"30":{start:{line:55,column:16},end:{line:55,column:68}},"31":{start:{line:59,column:30},end:{line:65,column:4}},"32":{start:{line:60,column:20},end:{line:60,column:77}},"33":{start:{line:60,column:44},end:{line:60,column:76}},"34":{start:{line:61,column:4},end:{line:64,column:6}},"35":{start:{line:67,column:2},end:{line:67,column:32}},"36":{start:{line:71,column:0},end:{line:97,column:3}},"37":{start:{line:72,column:23},end:{line:72,column:60}},"38":{start:{line:73,column:20},end:{line:73,column:35}},"39":{start:{line:75,column:2},end:{line:96,column:3}},"40":{start:{line:76,column:15},end:{line:76,column:59}},"41":{start:{line:77,column:29},end:{line:79,column:5}},"42":{start:{line:78,column:18},end:{line:78,column:54}},"43":{start:{line:81,column:4},end:{line:93,column:5}},"44":{start:{line:83,column:6},end:{line:83,column:42}},"45":{start:{line:84,column:6},end:{line:84,column:69}},"46":{start:{line:87,column:6},end:{line:90,column:9}},"47":{start:{line:92,column:6},end:{line:92,column:76}},"48":{start:{line:95,column:4},end:{line:95,column:79}},"49":{start:{line:99,column:0},end:{line:105,column:3}},"50":{start:{line:100,column:18},end:{line:100,column:34}},"51":{start:{line:101,column:18},end:{line:103,column:20}},"52":{start:{line:104,column:2},end:{line:104,column:47}},"53":{start:{line:107,column:0},end:{line:107,column:33}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:29,column:27},end:{line:29,column:28}},loc:{start:{line:29,column:41},end:{line:31,column:1}},line:29},"1":{name:"(anonymous_1)",decl:{start:{line:34,column:25},end:{line:34,column:26}},loc:{start:{line:34,column:39},end:{line:36,column:1}},line:34},"2":{name:"(anonymous_2)",decl:{start:{line:43,column:13},end:{line:43,column:14}},loc:{start:{line:43,column:27},end:{line:45,column:1}},line:43},"3":{name:"(anonymous_3)",decl:{start:{line:48,column:42},end:{line:48,column:43}},loc:{start:{line:48,column:56},end:{line:68,column:1}},line:48},"4":{name:"(anonymous_4)",decl:{start:{line:55,column:4},end:{line:55,column:5}},loc:{start:{line:55,column:16},end:{line:55,column:68}},line:55},"5":{name:"(anonymous_5)",decl:{start:{line:59,column:52},end:{line:59,column:53}},loc:{start:{line:59,column:64},end:{line:65,column:3}},line:59},"6":{name:"(anonymous_6)",decl:{start:{line:60,column:37},end:{line:60,column:38}},loc:{start:{line:60,column:44},end:{line:60,column:76}},line:60},"7":{name:"(anonymous_7)",decl:{start:{line:71,column:46},end:{line:71,column:47}},loc:{start:{line:71,column:60},end:{line:97,column:1}},line:71},"8":{name:"(anonymous_8)",decl:{start:{line:78,column:6},end:{line:78,column:7}},loc:{start:{line:78,column:18},end:{line:78,column:54}},line:78},"9":{name:"(anonymous_9)",decl:{start:{line:99,column:26},end:{line:99,column:27}},loc:{start:{line:99,column:38},end:{line:105,column:1}},line:99}},branchMap:{"0":{loc:{start:{line:8,column:13},end:{line:8,column:37}},type:"binary-expr",locations:[{start:{line:8,column:13},end:{line:8,column:29}},{start:{line:8,column:33},end:{line:8,column:37}}],line:8},"1":{loc:{start:{line:55,column:16},end:{line:55,column:68}},type:"binary-expr",locations:[{start:{line:55,column:16},end:{line:55,column:44}},{start:{line:55,column:48},end:{line:55,column:68}}],line:55},"2":{loc:{start:{line:63,column:12},end:{line:63,column:46}},type:"cond-expr",locations:[{start:{line:63,column:22},end:{line:63,column:34}},{start:{line:63,column:37},end:{line:63,column:46}}],line:63},"3":{loc:{start:{line:81,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:81,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:81},"4":{loc:{start:{line:102,column:4},end:{line:102,column:59}},type:"cond-expr",locations:[{start:{line:102,column:30},end:{line:102,column:41}},{start:{line:102,column:44},end:{line:102,column:59}}],line:102}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b005bbfd6fe19fba4af2390a5ecdf85e10f26ff8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1xj6pfxuml=function(){return actualCoverage;};}return actualCoverage;}cov_1xj6pfxuml();const express=(cov_1xj6pfxuml().s[0]++,require("express"));const bodyParser=(cov_1xj6pfxuml().s[1]++,require("body-parser"));const fs=(cov_1xj6pfxuml().s[2]++,require("fs"));const path=(cov_1xj6pfxuml().s[3]++,require("path"));const cors=(cov_1xj6pfxuml().s[4]++,require("cors"));const app=(cov_1xj6pfxuml().s[5]++,express());const PORT=(cov_1xj6pfxuml().s[6]++,(cov_1xj6pfxuml().b[0][0]++,process.env.PORT)||(cov_1xj6pfxuml().b[0][1]++,5050));const dbPath=(cov_1xj6pfxuml().s[7]++,path.join(__dirname,"utils/db.json"));// Middleware setup
cov_1xj6pfxuml().s[8]++;app.use(cors());cov_1xj6pfxuml().s[9]++;app.use(bodyParser.urlencoded({extended:true}));cov_1xj6pfxuml().s[10]++;app.use(bodyParser.json());cov_1xj6pfxuml().s[11]++;app.use(express.static("public"));const{updateAttendanceStatus,getAttendanceByLesson}=(cov_1xj6pfxuml().s[12]++,require("./utils/ResourceUtil"));cov_1xj6pfxuml().s[13]++;app.get("/view-attendance/:attendance/lessonID",getAttendanceByLesson);cov_1xj6pfxuml().s[14]++;app.put("/edit-attendance/:attendanceID",updateAttendanceStatus);// Import leave application routes from leaveapp.js
const leaveAppRoutes=(cov_1xj6pfxuml().s[15]++,require("./util/leaveapp"));cov_1xj6pfxuml().s[16]++;app.use("/leave",leaveAppRoutes);// Serve search.js from the util directory
cov_1xj6pfxuml().s[17]++;app.get("/util/search.js",(req,res)=>{cov_1xj6pfxuml().f[0]++;cov_1xj6pfxuml().s[18]++;res.sendFile(path.join(__dirname,"util","search.js"));});// Serve db.json from the data directory
cov_1xj6pfxuml().s[19]++;app.get("/data/db.json",(req,res)=>{cov_1xj6pfxuml().f[1]++;cov_1xj6pfxuml().s[20]++;res.sendFile(dbPath);});// Import and use the create student route
const createStudentRoute=(cov_1xj6pfxuml().s[21]++,require("./util/createStudent"));cov_1xj6pfxuml().s[22]++;app.use("/",createStudentRoute);// Default route to serve the main HTML file
cov_1xj6pfxuml().s[23]++;app.get("/",(req,res)=>{cov_1xj6pfxuml().f[2]++;cov_1xj6pfxuml().s[24]++;res.sendFile(path.join(__dirname,"public","index.html"));});// Endpoint to get attendance for a specific lesson
cov_1xj6pfxuml().s[25]++;app.get("/api/view-attendance/:lessonID",(req,res)=>{cov_1xj6pfxuml().f[3]++;const lessonID=(cov_1xj6pfxuml().s[26]++,parseInt(req.params.lessonID,10));const date=(cov_1xj6pfxuml().s[27]++,req.query.date);const db=(cov_1xj6pfxuml().s[28]++,JSON.parse(fs.readFileSync(dbPath,"utf-8")));// Filter attendance records by lessonID
const attendanceRecords=(cov_1xj6pfxuml().s[29]++,db.attendance.filter(record=>{cov_1xj6pfxuml().f[4]++;cov_1xj6pfxuml().s[30]++;return(cov_1xj6pfxuml().b[1][0]++,record.lessonID===lessonID)&&(cov_1xj6pfxuml().b[1][1]++,record.date===date);}));// Map attendance records to include student names
const attendanceWithNames=(cov_1xj6pfxuml().s[31]++,attendanceRecords.map(record=>{cov_1xj6pfxuml().f[5]++;const student=(cov_1xj6pfxuml().s[32]++,db.students.find(s=>{cov_1xj6pfxuml().f[6]++;cov_1xj6pfxuml().s[33]++;return s.studentID===record.studentID;}));cov_1xj6pfxuml().s[34]++;return{...record,name:student?(cov_1xj6pfxuml().b[2][0]++,student.name):(cov_1xj6pfxuml().b[2][1]++,"Unknown")// Add the student's name or "Unknown" if not found
};}));cov_1xj6pfxuml().s[35]++;res.json(attendanceWithNames);});// Endpoint to update attendance status
cov_1xj6pfxuml().s[36]++;app.put("/api/edit-attendance/:attendanceID",(req,res)=>{cov_1xj6pfxuml().f[7]++;const attendanceID=(cov_1xj6pfxuml().s[37]++,parseInt(req.params.attendanceID,10));const newStatus=(cov_1xj6pfxuml().s[38]++,req.body.status);cov_1xj6pfxuml().s[39]++;try{const db=(cov_1xj6pfxuml().s[40]++,JSON.parse(fs.readFileSync(dbPath,"utf-8")));const attendanceRecord=(cov_1xj6pfxuml().s[41]++,db.attendance.find(record=>{cov_1xj6pfxuml().f[8]++;cov_1xj6pfxuml().s[42]++;return record.attendanceID===attendanceID;}));cov_1xj6pfxuml().s[43]++;if(attendanceRecord){cov_1xj6pfxuml().b[3][0]++;cov_1xj6pfxuml().s[44]++;// Update the status
attendanceRecord.status=newStatus;cov_1xj6pfxuml().s[45]++;fs.writeFileSync(dbPath,JSON.stringify(db,null,2),"utf-8");// Respond with the success message and the updated record
cov_1xj6pfxuml().s[46]++;return res.status(200).json({message:"Attendance status modified successfully!",// Ensure this message is included
attendanceRecord});}else{cov_1xj6pfxuml().b[3][1]++;cov_1xj6pfxuml().s[47]++;return res.status(404).json({error:"Attendance record not found"});}}catch(err){cov_1xj6pfxuml().s[48]++;return res.status(500).json({error:"Failed to read or write database"});}});cov_1xj6pfxuml().s[49]++;server=app.listen(PORT,function(){cov_1xj6pfxuml().f[9]++;const address=(cov_1xj6pfxuml().s[50]++,server.address());const baseUrl=(cov_1xj6pfxuml().s[51]++,`http://${address.address=="::"?(cov_1xj6pfxuml().b[4][0]++,"localhost"):(cov_1xj6pfxuml().b[4][1]++,address.address)}:${address.port}`);cov_1xj6pfxuml().s[52]++;console.log(`DevOps project at: ${baseUrl}`);});cov_1xj6pfxuml().s[53]++;module.exports={app,server};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXhqNnBmeHVtbCIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwiYm9keVBhcnNlciIsImZzIiwicGF0aCIsImNvcnMiLCJhcHAiLCJQT1JUIiwiYiIsInByb2Nlc3MiLCJlbnYiLCJkYlBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsInN0YXRpYyIsInVwZGF0ZUF0dGVuZGFuY2VTdGF0dXMiLCJnZXRBdHRlbmRhbmNlQnlMZXNzb24iLCJnZXQiLCJwdXQiLCJsZWF2ZUFwcFJvdXRlcyIsInJlcSIsInJlcyIsImYiLCJzZW5kRmlsZSIsImNyZWF0ZVN0dWRlbnRSb3V0ZSIsImxlc3NvbklEIiwicGFyc2VJbnQiLCJwYXJhbXMiLCJkYXRlIiwicXVlcnkiLCJkYiIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsImF0dGVuZGFuY2VSZWNvcmRzIiwiYXR0ZW5kYW5jZSIsImZpbHRlciIsInJlY29yZCIsImF0dGVuZGFuY2VXaXRoTmFtZXMiLCJtYXAiLCJzdHVkZW50Iiwic3R1ZGVudHMiLCJmaW5kIiwic3R1ZGVudElEIiwibmFtZSIsImF0dGVuZGFuY2VJRCIsIm5ld1N0YXR1cyIsImJvZHkiLCJzdGF0dXMiLCJhdHRlbmRhbmNlUmVjb3JkIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIm1lc3NhZ2UiLCJlcnJvciIsImVyciIsInNlcnZlciIsImxpc3RlbiIsImFkZHJlc3MiLCJiYXNlVXJsIiwicG9ydCIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDUwNTA7XHJcbmNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwidXRpbHMvZGIuanNvblwiKTtcclxuXHJcbi8vIE1pZGRsZXdhcmUgc2V0dXBcclxuYXBwLnVzZShjb3JzKCkpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoXCJwdWJsaWNcIikpO1xyXG5cclxuY29uc3Qge1xyXG4gIHVwZGF0ZUF0dGVuZGFuY2VTdGF0dXMsXHJcbiAgZ2V0QXR0ZW5kYW5jZUJ5TGVzc29uLFxyXG59ID0gcmVxdWlyZShcIi4vdXRpbHMvUmVzb3VyY2VVdGlsXCIpO1xyXG5hcHAuZ2V0KFwiL3ZpZXctYXR0ZW5kYW5jZS86YXR0ZW5kYW5jZS9sZXNzb25JRFwiLCBnZXRBdHRlbmRhbmNlQnlMZXNzb24pO1xyXG5hcHAucHV0KFwiL2VkaXQtYXR0ZW5kYW5jZS86YXR0ZW5kYW5jZUlEXCIsIHVwZGF0ZUF0dGVuZGFuY2VTdGF0dXMpO1xyXG5cclxuLy8gSW1wb3J0IGxlYXZlIGFwcGxpY2F0aW9uIHJvdXRlcyBmcm9tIGxlYXZlYXBwLmpzXHJcbmNvbnN0IGxlYXZlQXBwUm91dGVzID0gcmVxdWlyZShcIi4vdXRpbC9sZWF2ZWFwcFwiKTtcclxuYXBwLnVzZShcIi9sZWF2ZVwiLCBsZWF2ZUFwcFJvdXRlcyk7XHJcblxyXG4vLyBTZXJ2ZSBzZWFyY2guanMgZnJvbSB0aGUgdXRpbCBkaXJlY3RvcnlcclxuYXBwLmdldChcIi91dGlsL3NlYXJjaC5qc1wiLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgXCJ1dGlsXCIsIFwic2VhcmNoLmpzXCIpKTtcclxufSk7XHJcblxyXG4vLyBTZXJ2ZSBkYi5qc29uIGZyb20gdGhlIGRhdGEgZGlyZWN0b3J5XHJcbmFwcC5nZXQoXCIvZGF0YS9kYi5qc29uXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJlcy5zZW5kRmlsZShkYlBhdGgpO1xyXG59KTtcclxuXHJcbi8vIEltcG9ydCBhbmQgdXNlIHRoZSBjcmVhdGUgc3R1ZGVudCByb3V0ZVxyXG5jb25zdCBjcmVhdGVTdHVkZW50Um91dGUgPSByZXF1aXJlKFwiLi91dGlsL2NyZWF0ZVN0dWRlbnRcIik7XHJcbmFwcC51c2UoXCIvXCIsIGNyZWF0ZVN0dWRlbnRSb3V0ZSk7XHJcblxyXG4vLyBEZWZhdWx0IHJvdXRlIHRvIHNlcnZlIHRoZSBtYWluIEhUTUwgZmlsZVxyXG5hcHAuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgXCJwdWJsaWNcIiwgXCJpbmRleC5odG1sXCIpKTtcclxufSk7XHJcblxyXG4vLyBFbmRwb2ludCB0byBnZXQgYXR0ZW5kYW5jZSBmb3IgYSBzcGVjaWZpYyBsZXNzb25cclxuYXBwLmdldChcIi9hcGkvdmlldy1hdHRlbmRhbmNlLzpsZXNzb25JRFwiLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBsZXNzb25JRCA9IHBhcnNlSW50KHJlcS5wYXJhbXMubGVzc29uSUQsIDEwKTtcclxuICBjb25zdCBkYXRlID0gcmVxLnF1ZXJ5LmRhdGU7XHJcbiAgY29uc3QgZGIgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhkYlBhdGgsIFwidXRmLThcIikpO1xyXG5cclxuICAvLyBGaWx0ZXIgYXR0ZW5kYW5jZSByZWNvcmRzIGJ5IGxlc3NvbklEXHJcbiAgY29uc3QgYXR0ZW5kYW5jZVJlY29yZHMgPSBkYi5hdHRlbmRhbmNlLmZpbHRlcihcclxuICAgIChyZWNvcmQpID0+IHJlY29yZC5sZXNzb25JRCA9PT0gbGVzc29uSUQgJiYgcmVjb3JkLmRhdGUgPT09IGRhdGVcclxuICApO1xyXG5cclxuICAvLyBNYXAgYXR0ZW5kYW5jZSByZWNvcmRzIHRvIGluY2x1ZGUgc3R1ZGVudCBuYW1lc1xyXG4gIGNvbnN0IGF0dGVuZGFuY2VXaXRoTmFtZXMgPSBhdHRlbmRhbmNlUmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4ge1xyXG4gICAgY29uc3Qgc3R1ZGVudCA9IGRiLnN0dWRlbnRzLmZpbmQoKHMpID0+IHMuc3R1ZGVudElEID09PSByZWNvcmQuc3R1ZGVudElEKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLnJlY29yZCxcclxuICAgICAgbmFtZTogc3R1ZGVudCA/IHN0dWRlbnQubmFtZSA6IFwiVW5rbm93blwiLCAvLyBBZGQgdGhlIHN0dWRlbnQncyBuYW1lIG9yIFwiVW5rbm93blwiIGlmIG5vdCBmb3VuZFxyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgcmVzLmpzb24oYXR0ZW5kYW5jZVdpdGhOYW1lcyk7XHJcbn0pO1xyXG5cclxuLy8gRW5kcG9pbnQgdG8gdXBkYXRlIGF0dGVuZGFuY2Ugc3RhdHVzXHJcbmFwcC5wdXQoXCIvYXBpL2VkaXQtYXR0ZW5kYW5jZS86YXR0ZW5kYW5jZUlEXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IGF0dGVuZGFuY2VJRCA9IHBhcnNlSW50KHJlcS5wYXJhbXMuYXR0ZW5kYW5jZUlELCAxMCk7XHJcbiAgY29uc3QgbmV3U3RhdHVzID0gcmVxLmJvZHkuc3RhdHVzO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGIgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhkYlBhdGgsIFwidXRmLThcIikpO1xyXG4gICAgY29uc3QgYXR0ZW5kYW5jZVJlY29yZCA9IGRiLmF0dGVuZGFuY2UuZmluZChcclxuICAgICAgKHJlY29yZCkgPT4gcmVjb3JkLmF0dGVuZGFuY2VJRCA9PT0gYXR0ZW5kYW5jZUlEXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChhdHRlbmRhbmNlUmVjb3JkKSB7XHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgc3RhdHVzXHJcbiAgICAgIGF0dGVuZGFuY2VSZWNvcmQuc3RhdHVzID0gbmV3U3RhdHVzO1xyXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGRiUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGIsIG51bGwsIDIpLCBcInV0Zi04XCIpO1xyXG5cclxuICAgICAgLy8gUmVzcG9uZCB3aXRoIHRoZSBzdWNjZXNzIG1lc3NhZ2UgYW5kIHRoZSB1cGRhdGVkIHJlY29yZFxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiQXR0ZW5kYW5jZSBzdGF0dXMgbW9kaWZpZWQgc3VjY2Vzc2Z1bGx5IVwiLCAvLyBFbnN1cmUgdGhpcyBtZXNzYWdlIGlzIGluY2x1ZGVkXHJcbiAgICAgICAgYXR0ZW5kYW5jZVJlY29yZCxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBdHRlbmRhbmNlIHJlY29yZCBub3QgZm91bmRcIiB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byByZWFkIG9yIHdyaXRlIGRhdGFiYXNlXCIgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnNlcnZlciA9IGFwcC5saXN0ZW4oUE9SVCwgZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IGFkZHJlc3MgPSBzZXJ2ZXIuYWRkcmVzcygpO1xyXG4gIGNvbnN0IGJhc2VVcmwgPSBgaHR0cDovLyR7XHJcbiAgICBhZGRyZXNzLmFkZHJlc3MgPT0gXCI6OlwiID8gXCJsb2NhbGhvc3RcIiA6IGFkZHJlc3MuYWRkcmVzc1xyXG4gIH06JHthZGRyZXNzLnBvcnR9YDtcclxuICBjb25zb2xlLmxvZyhgRGV2T3BzIHByb2plY3QgYXQ6ICR7YmFzZVVybH1gKTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXBwLCBzZXJ2ZXIgfTtcclxuIl0sIm1hcHBpbmdzIjoiNmdOQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUNsQyxLQUFNLENBQUFDLFVBQVUsRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFDekMsS0FBTSxDQUFBRSxFQUFFLEVBQUFOLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQ3hCLEtBQU0sQ0FBQUcsSUFBSSxFQUFBUCxjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUM1QixLQUFNLENBQUFJLElBQUksRUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFFNUIsS0FBTSxDQUFBSyxHQUFHLEVBQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUFHRCxPQUFPLENBQUMsQ0FBQyxFQUNyQixLQUFNLENBQUFRLElBQUksRUFBQVYsY0FBQSxHQUFBRyxDQUFBLE1BQUcsQ0FBQUgsY0FBQSxHQUFBVyxDQUFBLFNBQUFDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxJQUFJLElBQUFWLGNBQUEsR0FBQVcsQ0FBQSxTQUFJLElBQUksR0FDckMsS0FBTSxDQUFBRyxNQUFNLEVBQUFkLGNBQUEsR0FBQUcsQ0FBQSxNQUFHSSxJQUFJLENBQUNRLElBQUksQ0FBQ0MsU0FBUyxDQUFFLGVBQWUsQ0FBQyxFQUVwRDtBQUFBaEIsY0FBQSxHQUFBRyxDQUFBLE1BQ0FNLEdBQUcsQ0FBQ1EsR0FBRyxDQUFDVCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNSLGNBQUEs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