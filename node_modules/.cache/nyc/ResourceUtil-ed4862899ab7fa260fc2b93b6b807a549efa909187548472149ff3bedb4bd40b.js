function cov_j29g1cucy(){var path="C:\\Users\\ajxia\\OneDrive\\Desktop\\Documents\\DVOPS_Projects\\DVOPS_Project\\DevOps-Project\\utils\\ResourceUtil.js";var hash="76fa18930ae6979a381731e3dddc4649c0b24fac";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ajxia\\OneDrive\\Desktop\\Documents\\DVOPS_Projects\\DVOPS_Project\\DevOps-Project\\utils\\ResourceUtil.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:24}},"1":{start:{line:2,column:15},end:{line:2,column:30}},"2":{start:{line:6,column:19},end:{line:6,column:52}},"3":{start:{line:7,column:15},end:{line:7,column:29}},"4":{start:{line:8,column:13},end:{line:8,column:57}},"5":{start:{line:10,column:28},end:{line:12,column:3}},"6":{start:{line:11,column:16},end:{line:11,column:68}},"7":{start:{line:14,column:30},end:{line:20,column:4}},"8":{start:{line:15,column:20},end:{line:15,column:77}},"9":{start:{line:15,column:44},end:{line:15,column:76}},"10":{start:{line:16,column:4},end:{line:19,column:6}},"11":{start:{line:22,column:2},end:{line:22,column:32}},"12":{start:{line:27,column:23},end:{line:27,column:60}},"13":{start:{line:28,column:20},end:{line:28,column:35}},"14":{start:{line:30,column:13},end:{line:30,column:57}},"15":{start:{line:31,column:19},end:{line:31,column:77}},"16":{start:{line:31,column:45},end:{line:31,column:76}},"17":{start:{line:33,column:2},end:{line:39,column:3}},"18":{start:{line:34,column:4},end:{line:34,column:34}},"19":{start:{line:35,column:4},end:{line:35,column:58}},"20":{start:{line:36,column:4},end:{line:36,column:61}},"21":{start:{line:38,column:4},end:{line:38,column:69}},"22":{start:{line:42,column:0},end:{line:42,column:67}}},fnMap:{"0":{name:"getAttendanceByLesson",decl:{start:{line:5,column:9},end:{line:5,column:30}},loc:{start:{line:5,column:41},end:{line:23,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:4},end:{line:11,column:5}},loc:{start:{line:11,column:16},end:{line:11,column:68}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:52},end:{line:14,column:53}},loc:{start:{line:14,column:64},end:{line:20,column:3}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:44},end:{line:15,column:76}},line:15},"4":{name:"updateAttendanceStatus",decl:{start:{line:26,column:9},end:{line:26,column:31}},loc:{start:{line:26,column:42},end:{line:40,column:1}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:31,column:38},end:{line:31,column:39}},loc:{start:{line:31,column:45},end:{line:31,column:76}},line:31}},branchMap:{"0":{loc:{start:{line:11,column:16},end:{line:11,column:68}},type:"binary-expr",locations:[{start:{line:11,column:16},end:{line:11,column:44}},{start:{line:11,column:48},end:{line:11,column:68}}],line:11},"1":{loc:{start:{line:18,column:12},end:{line:18,column:46}},type:"cond-expr",locations:[{start:{line:18,column:22},end:{line:18,column:34}},{start:{line:18,column:37},end:{line:18,column:46}}],line:18},"2":{loc:{start:{line:33,column:2},end:{line:39,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:39,column:3}},{start:{line:37,column:9},end:{line:39,column:3}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"76fa18930ae6979a381731e3dddc4649c0b24fac"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_j29g1cucy=function(){return actualCoverage;};}return actualCoverage;}cov_j29g1cucy();const fs=(cov_j29g1cucy().s[0]++,require("fs"));const dbPath=(cov_j29g1cucy().s[1]++,"utils/db.json");// Path to your database (JSON file)
// Get attendance records for a specific lesson and date
function getAttendanceByLesson(req,res){cov_j29g1cucy().f[0]++;const lessonID=(cov_j29g1cucy().s[2]++,parseInt(req.params.lessonID,10));const date=(cov_j29g1cucy().s[3]++,req.query.date);const db=(cov_j29g1cucy().s[4]++,JSON.parse(fs.readFileSync(dbPath,"utf-8")));const attendanceRecords=(cov_j29g1cucy().s[5]++,db.attendance.filter(record=>{cov_j29g1cucy().f[1]++;cov_j29g1cucy().s[6]++;return(cov_j29g1cucy().b[0][0]++,record.lessonID===lessonID)&&(cov_j29g1cucy().b[0][1]++,record.date===date);}));const attendanceWithNames=(cov_j29g1cucy().s[7]++,attendanceRecords.map(record=>{cov_j29g1cucy().f[2]++;const student=(cov_j29g1cucy().s[8]++,db.students.find(s=>{cov_j29g1cucy().f[3]++;cov_j29g1cucy().s[9]++;return s.studentID===record.studentID;}));cov_j29g1cucy().s[10]++;return{...record,name:student?(cov_j29g1cucy().b[1][0]++,student.name):(cov_j29g1cucy().b[1][1]++,"Unknown")};}));cov_j29g1cucy().s[11]++;res.json(attendanceWithNames);}// Update attendance status for attendance
function updateAttendanceStatus(req,res){cov_j29g1cucy().f[4]++;const attendanceID=(cov_j29g1cucy().s[12]++,parseInt(req.params.attendanceID,10));const newStatus=(cov_j29g1cucy().s[13]++,req.body.status);const db=(cov_j29g1cucy().s[14]++,JSON.parse(fs.readFileSync(dbPath,"utf-8")));let attendance=(cov_j29g1cucy().s[15]++,db.attendance.find(r=>{cov_j29g1cucy().f[5]++;cov_j29g1cucy().s[16]++;return r.attendanceID===attendanceID;}));cov_j29g1cucy().s[17]++;if(attendance){cov_j29g1cucy().b[2][0]++;cov_j29g1cucy().s[18]++;attendance.status=newStatus;cov_j29g1cucy().s[19]++;fs.writeFileSync(dbPath,JSON.stringify(db),"utf-8");cov_j29g1cucy().s[20]++;res.json({message:"Attendance updated successfully"});}else{cov_j29g1cucy().b[2][1]++;cov_j29g1cucy().s[21]++;res.status(404).json({message:"Attendance record not found"});}}cov_j29g1cucy().s[22]++;module.exports={getAttendanceByLesson,updateAttendanceStatus};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfajI5ZzFjdWN5IiwiYWN0dWFsQ292ZXJhZ2UiLCJmcyIsInMiLCJyZXF1aXJlIiwiZGJQYXRoIiwiZ2V0QXR0ZW5kYW5jZUJ5TGVzc29uIiwicmVxIiwicmVzIiwiZiIsImxlc3NvbklEIiwicGFyc2VJbnQiLCJwYXJhbXMiLCJkYXRlIiwicXVlcnkiLCJkYiIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsImF0dGVuZGFuY2VSZWNvcmRzIiwiYXR0ZW5kYW5jZSIsImZpbHRlciIsInJlY29yZCIsImIiLCJhdHRlbmRhbmNlV2l0aE5hbWVzIiwibWFwIiwic3R1ZGVudCIsInN0dWRlbnRzIiwiZmluZCIsInN0dWRlbnRJRCIsIm5hbWUiLCJqc29uIiwidXBkYXRlQXR0ZW5kYW5jZVN0YXR1cyIsImF0dGVuZGFuY2VJRCIsIm5ld1N0YXR1cyIsImJvZHkiLCJzdGF0dXMiLCJyIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiUmVzb3VyY2VVdGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xyXG5jb25zdCBkYlBhdGggPSBcInV0aWxzL2RiLmpzb25cIjsgLy8gUGF0aCB0byB5b3VyIGRhdGFiYXNlIChKU09OIGZpbGUpXHJcblxyXG4vLyBHZXQgYXR0ZW5kYW5jZSByZWNvcmRzIGZvciBhIHNwZWNpZmljIGxlc3NvbiBhbmQgZGF0ZVxyXG5mdW5jdGlvbiBnZXRBdHRlbmRhbmNlQnlMZXNzb24ocmVxLCByZXMpIHtcclxuICBjb25zdCBsZXNzb25JRCA9IHBhcnNlSW50KHJlcS5wYXJhbXMubGVzc29uSUQsIDEwKTtcclxuICBjb25zdCBkYXRlID0gcmVxLnF1ZXJ5LmRhdGU7XHJcbiAgY29uc3QgZGIgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhkYlBhdGgsIFwidXRmLThcIikpO1xyXG5cclxuICBjb25zdCBhdHRlbmRhbmNlUmVjb3JkcyA9IGRiLmF0dGVuZGFuY2UuZmlsdGVyKFxyXG4gICAgKHJlY29yZCkgPT4gcmVjb3JkLmxlc3NvbklEID09PSBsZXNzb25JRCAmJiByZWNvcmQuZGF0ZSA9PT0gZGF0ZVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGF0dGVuZGFuY2VXaXRoTmFtZXMgPSBhdHRlbmRhbmNlUmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4ge1xyXG4gICAgY29uc3Qgc3R1ZGVudCA9IGRiLnN0dWRlbnRzLmZpbmQoKHMpID0+IHMuc3R1ZGVudElEID09PSByZWNvcmQuc3R1ZGVudElEKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLnJlY29yZCxcclxuICAgICAgbmFtZTogc3R1ZGVudCA/IHN0dWRlbnQubmFtZSA6IFwiVW5rbm93blwiLFxyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgcmVzLmpzb24oYXR0ZW5kYW5jZVdpdGhOYW1lcyk7XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSBhdHRlbmRhbmNlIHN0YXR1cyBmb3IgYXR0ZW5kYW5jZVxyXG5mdW5jdGlvbiB1cGRhdGVBdHRlbmRhbmNlU3RhdHVzKHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgYXR0ZW5kYW5jZUlEID0gcGFyc2VJbnQocmVxLnBhcmFtcy5hdHRlbmRhbmNlSUQsIDEwKTtcclxuICBjb25zdCBuZXdTdGF0dXMgPSByZXEuYm9keS5zdGF0dXM7XHJcblxyXG4gIGNvbnN0IGRiID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZGJQYXRoLCBcInV0Zi04XCIpKTtcclxuICBsZXQgYXR0ZW5kYW5jZSA9IGRiLmF0dGVuZGFuY2UuZmluZCgocikgPT4gci5hdHRlbmRhbmNlSUQgPT09IGF0dGVuZGFuY2VJRCk7XHJcblxyXG4gIGlmIChhdHRlbmRhbmNlKSB7XHJcbiAgICBhdHRlbmRhbmNlLnN0YXR1cyA9IG5ld1N0YXR1cztcclxuICAgIGZzLndyaXRlRmlsZVN5bmMoZGJQYXRoLCBKU09OLnN0cmluZ2lmeShkYiksIFwidXRmLThcIik7XHJcbiAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiQXR0ZW5kYW5jZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXR0ZW5kYW5jZSByZWNvcmQgbm90IGZvdW5kXCIgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgZ2V0QXR0ZW5kYW5jZUJ5TGVzc29uLCB1cGRhdGVBdHRlbmRhbmNlU3RhdHVzIH07XHJcbiJdLCJtYXBwaW5ncyI6IituSEFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLEVBQUUsRUFBQUYsYUFBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFDeEIsS0FBTSxDQUFBQyxNQUFNLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLGVBQWUsRUFBRTtBQUVoQztBQUNBLFFBQVMsQ0FBQUcscUJBQXFCQSxDQUFDQyxHQUFHLENBQUVDLEdBQUcsQ0FBRSxDQUFBUixhQUFBLEdBQUFTLENBQUEsTUFDdkMsS0FBTSxDQUFBQyxRQUFRLEVBQUFWLGFBQUEsR0FBQUcsQ0FBQSxNQUFHUSxRQUFRLENBQUNKLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDRixRQUFRLENBQUUsRUFBRSxDQUFDLEVBQ2xELEtBQU0sQ0FBQUcsSUFBSSxFQUFBYixhQUFBLEdBQUFHLENBQUEsTUFBR0ksR0FBRyxDQUFDTyxLQUFLLENBQUNELElBQUksRUFDM0IsS0FBTSxDQUFBRSxFQUFFLEVBQUFmLGFBQUEsR0FBQUcsQ0FBQSxNQUFHYSxJQUFJLENBQUNDLEtBQUssQ0FBQ2YsRUFBRSxDQUFDZ0IsWUFBWSxDQUFDYixNQUFNLENBQUUsT0FBTyxDQUFDLENBQUMsRUFFdkQsS0FBTSxDQUFBYyxpQkFBaUIsRUFBQW5CLGFBQUEsR0FBQUcsQ0FBQSxNQUFHWSxFQUFF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